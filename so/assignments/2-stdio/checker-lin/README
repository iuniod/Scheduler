Nume: Olteanu Eduard-Florin
Grupa: 336CAb

Tema 2 - Biblioteca stdio

ORGANIZARE

Structura SO_FILE contine file descriptor-ul, buffer-ul, pozitia curenta
in buffer, lungimea buffer-ului, ultima operatie, pozitia cursorului din fisier
si daca au fost gasit eroare sau eof. De asemenea salveaza si pid-ul procesului
copil pentru a-l astepta inainte sa inchida pipe-ul.

so_fopen deschide fisierul cu flag-urile corespunzatoare modului cerut si
initializeaza structura SO_FILE.

Functia so_fclose da flush si apoi inchide fisierul.

Functiile fread si fwrite se folosesc de functiile so_fgetc si so_fputc.

Functia so_fgetc da flush mai intai la buffer. Daca buffer-ul este plin/gol
umple buffer-ul citind din fisier. Altfel returneaza un caracater din buffer.

Functia so_fputc goleste buffer-ul daca ultima operatie a fost citire, apoi
daca buffer-ul este plin scrie in fisier pana cand buffer-ul este scris
complet.

Functia so_fflush scrie in fisier pana cand este scris tot buffer-ul daca
ultima operatie a fost una de scriere.

Functia so_fseek seteaza cursorul la pozitia indicata. Inainte de asta goleste
buffer-ul daca ultima operatie a fost de citire sau da flush daca a fost de
scriere.

Functia so_popen creeaza un pipe in functie de type. Apoi initializeaza
structura SO_FILE si da fork. Fiecare proces(parinte/copil) inchide file
descriptorul de care nu are nevoie in functie de type. Copilul executa
comanda primite si redirecteaza output-ul/input-ul la file descriptorul
folosit. Parintele returneaza structura SO_FILE.

Functia so_pclose da flush, inchide file_descriptorul si asteapta sa termine
procesul copil inainte sa elibereze memoria si sa returneze.


Consider ca tema este oarecum utila pentru a ne obisnui cu apelurile de sistem.
Consider implementarea putin naiva pentru ca puteam in fputc sa dau flush in
loc sa apelez iar write.


IMPLEMENTARE

Intregul enunt al temei a fost implementat.
Am intalnit putine dificultati pana am inteles exact cum functioneaza pipe-ul
dat fiind ca la laborator exercitiul a fost bonus, dar a ajutat faptul ca am
primit rezolvarea laboratorului.


Makefile:
Creeaza biblioteca dinamica libso_stdio.so din sursa tema2.so
Nu exista executabil de rulat.

Bibliografie
https://ocw.cs.pub.ro/courses/so/laboratoare/laborator-02
https://ocw.cs.pub.ro/courses/so/laboratoare/laborator-03
